var B=e=>{throw TypeError(e)};var H=(e,t,r)=>t.has(e)||B("Cannot "+r);var S=(e,t,r)=>(H(e,t,"read from private field"),r?r.call(e):t.get(e)),I=(e,t,r)=>t.has(e)?B("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),R=(e,t,r,s)=>(H(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import{y as rt}from"./index-CfOrKyLd.js";var y,N;class ot{constructor(t){I(this,y);I(this,N,new Set);R(this,y,t)}get current(){return S(this,y)}set current(t){S(this,y)!=t&&(R(this,y,t),S(this,N).forEach(r=>r(t)))}on(t){return S(this,N).add(t),()=>S(this,N).delete(t)}}y=new WeakMap,N=new WeakMap;const J=e=>new ot(e),j=Symbol.for("atomico.hooks");globalThis[j]=globalThis[j]||{};let T=globalThis[j];const nt=Symbol.for("Atomico.suspense"),K=Symbol.for("Atomico.effect"),it=Symbol.for("Atomico.layoutEffect"),q=Symbol.for("Atomico.insertionEffect"),$=(e,t,r)=>{const{i:s,hooks:o}=T.c,n=o[s]=o[s]||{};return n.value=e(n.value),n.effect=t,n.tag=r,T.c.i++,o[s].value},ct=e=>$((t=J(e))=>t),W=()=>$((e=J(T.c.host))=>e),Xt=()=>T.c.update,lt=(e,t,r=0)=>{let s={},o=!1;const n=()=>o,c=(a,l)=>{for(const u in s){const i=s[u];i.effect&&i.tag===a&&(i.value=i.effect(i.value,l))}};return{load:a=>{T.c={host:t,hooks:s,update:e,i:0,id:r};let l;try{o=!1,l=a()}catch(u){if(u!==nt)throw u;o=!0}finally{T.c=null}return l},cleanEffects:a=>(c(q,a),()=>(c(it,a),()=>{c(K,a)})),isSuspense:n}},C=Symbol.for;function at(e,t){const r=e.length;if(r!==t.length)return!1;for(let s=0;s<r;s++){let o=e[s],n=t[s];if(o!==n)return!1}return!0}const g=e=>typeof e=="function",P=e=>typeof e=="object",{isArray:ft}=Array,w=(e,t)=>(t?e instanceof HTMLStyleElement:!0)&&"hydrate"in((e==null?void 0:e.dataset)||{});function X(e,t){let r;const s=o=>{let{length:n}=o;for(let c=0;c<n;c++){const h=o[c];if(h&&Array.isArray(h))s(h);else{const f=typeof h;if(h==null||f==="function"||f==="boolean")continue;f==="string"||f==="number"?(r==null&&(r=""),r+=h):(r!=null&&(t(r),r=null),t(h))}}};s(e),r!=null&&t(r)}const Z=(e,t,r)=>(e.addEventListener(t,r),()=>e.removeEventListener(t,r));class G{constructor(t,r,s){this.message=r,this.target=t,this.value=s}}class ut extends G{}class ht extends G{}const O="Custom",mt=null,dt={true:1,"":1,1:1};function pt(e,t,r,s,o){const{type:n,reflect:c,event:h,value:f,attr:a=Et(t)}=(r==null?void 0:r.name)!=O&&P(r)&&r!=mt?r:{type:r},l=(n==null?void 0:n.name)===O&&n.map,u=f!=null?n==Function||!g(f)?()=>f:f:null;Object.defineProperty(e,t,{configurable:!0,set(i){const m=this[t];u&&n!=Boolean&&i==null&&(i=u());const{error:b,value:E}=(l?St:Nt)(n,i);if(b&&E!=null)throw new ut(this,`The value defined for prop '${t}' must be of type '${n.name}'`,E);m!=E&&(this._props[t]=E??void 0,this.update(),h&&bt(this,h),this.updated.then(()=>{c&&(this._ignoreAttr=a,gt(this,n,a,this[t]),this._ignoreAttr=null)}))},get(){return this._props[t]}}),u&&(o[t]=u()),s[a]={prop:t,type:n}}const bt=(e,{type:t,base:r=CustomEvent,...s})=>e.dispatchEvent(new r(t,s)),Et=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),gt=(e,t,r,s)=>s==null||t==Boolean&&!s?e.removeAttribute(r):e.setAttribute(r,(t==null?void 0:t.name)===O&&(t!=null&&t.serialize)?t==null?void 0:t.serialize(s):P(s)?JSON.stringify(s):t==Boolean?"":s),yt=(e,t)=>e==Boolean?!!dt[t]:e==Number?Number(t):e==String?t:e==Array||e==Object?JSON.parse(t):e.name==O?t:new e(t),St=({map:e},t)=>{try{return{value:e(t),error:!1}}catch{return{value:t,error:!0}}},Nt=(e,t)=>e==null||t==null?{value:t,error:!1}:e!=String&&t===""?{value:void 0,error:!1}:e==Object||e==Array||e==Symbol?{value:t,error:{}.toString.call(t)!==`[object ${e.name}]`}:t instanceof e?{value:t,error:e==Number&&Number.isNaN(t.valueOf())}:e==String||e==Number||e==Boolean?{value:t,error:e==Number?typeof t!="number"?!0:Number.isNaN(t):e==String?typeof t!="string":typeof t!="boolean"}:{value:t,error:!0};let Tt=0;const Pt=e=>{var r;const t=((r=(e==null?void 0:e.dataset)||{})==null?void 0:r.hydrate)||"";return t||"c"+Tt++},Q=(e,t=HTMLElement)=>{const r={},s={},o="prototype"in t&&t.prototype instanceof Element,n=o?t:"base"in t?t.base:HTMLElement,{props:c,styles:h}=o?e:t;class f extends n{constructor(){super(),this._setup(),this._render=()=>e({...this._props});for(const l in s)this[l]=s[l]}static get styles(){return[super.styles,h]}async _setup(){if(this._props)return;this._props={};let l,u;this.mounted=new Promise(d=>this.mount=()=>{d(),l!=this.parentNode&&(u!=l?this.unmounted.then(this.update):this.update()),l=this.parentNode}),this.unmounted=new Promise(d=>this.unmount=()=>{d(),(l!=this.parentNode||!this.isConnected)&&(i.cleanEffects(!0)()(),u=this.parentNode,l=null)}),this.symbolId=this.symbolId||Symbol(),this.symbolIdParent=Symbol();const i=lt(()=>this.update(),this,Pt(this));let m,b=!0;const E=w(this);this.update=()=>(m||(m=!0,this.updated=(this.updated||this.mounted).then(()=>{try{const d=i.load(this._render),p=i.cleanEffects();return d&&d.render(this,this.symbolId,E),m=!1,b&&!i.isSuspense()&&(b=!1,!E&&At(this)),p()}finally{m=!1}}).then(d=>{d&&d()})),this.updated),this.update()}connectedCallback(){this.mount(),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.unmount()}attributeChangedCallback(l,u,i){if(r[l]){if(l===this._ignoreAttr||u===i)return;const{prop:m,type:b}=r[l];try{this[m]=yt(b,i)}catch{throw new ht(this,`The value defined as attr '${l}' cannot be parsed by type '${b.name}'`,i)}}else super.attributeChangedCallback(l,u,i)}static get props(){return{...super.props,...c}}static get observedAttributes(){const l=super.observedAttributes||[];for(const u in c)pt(this.prototype,u,c[u],r,s);return Object.keys(r).concat(l)}}return f};function At(e){const{styles:t}=e.constructor,{shadowRoot:r}=e;if(r&&t.length){const s=[];X(t,o=>{o&&(o instanceof Element?r.appendChild(o.cloneNode(!0)):s.push(o))}),s.length&&(r.adoptedStyleSheets=s)}}const v=e=>(t,r)=>{$(([s,o]=[])=>((o||!o)&&(o&&at(o,r)?s=s||!0:(g(s)&&s(),s=null)),[s,r]),([s,o],n)=>n?(g(s)&&s(),[]):[s||t(),o],e)},Ct=v(K),_t=v(q),k=C("atomico/options");globalThis[k]=globalThis[k]||{sheet:!!document.adoptedStyleSheets};const x=globalThis[k];new Promise(e=>{x.ssr||(document.readyState==="loading"?Z(document,"DOMContentLoaded",e):e())});const Ot={checked:1,value:1,selected:1},Lt={list:1,type:1,size:1,form:1,width:1,height:1,src:1,href:1,slot:1},It={shadowDom:1,staticNode:1,cloneNode:1,children:1,key:1},_={},D=[];class F extends Text{}const Rt=C("atomico/id"),A=C("atomico/type"),M=C("atomico/ref"),V=C("atomico/vnode"),Mt=()=>{};function jt(e,t,r){return et(this,e,t,r)}const tt=(e,t,...r)=>{const s=t||_;let{children:o}=s;if(o=o??(r.length?r:D),e===Mt)return o;const n=e?e instanceof Node?1:e.prototype instanceof HTMLElement&&2:0;if(n===!1&&e instanceof Function)return e(o!=D?{children:o,...s}:s);const c=x.render||jt;return{[A]:V,type:e,props:s,children:o,key:s.key,shadow:s.shadowDom,static:s.staticNode,raw:n,is:s.is,clone:s.cloneNode,render:c}};function et(e,t,r=Rt,s,o){let n;if(t&&t[r]&&t[r].vnode==e||e[A]!=V)return t;(e||!t)&&(o=o||e.type=="svg",n=e.type!="host"&&(e.raw==1?(t&&e.clone?t[M]:t)!=e.type:e.raw==2?!(t instanceof e.type):t?t[M]||t.localName!=e.type:!t),n&&e.type!=null&&(e.raw==1&&e.clone?(s=!0,t=e.type.cloneNode(!0),t[M]=e.type):t=e.raw==1?e.type:e.raw==2?new e.type:o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,e.is?{is:e.is}:void 0)));const c=t[r]?t[r]:_,{vnode:h=_,cycle:f=0}=c;let{fragment:a,handlers:l}=c;const{children:u=D,props:i=_}=h;if(l=n?{}:l||{},e.static&&!n)return t;if(e.shadow&&!t.shadowRoot&&t.attachShadow({mode:"open",...e.shadow}),e.props!=i&&Dt(t,i,e.props,l,o),e.children!==u){const m=e.shadow?t.shadowRoot:t;a=kt(e.children,a,m,r,!f&&s,o&&e.type=="foreignObject"?!1:o)}return t[r]={vnode:e,handlers:l,fragment:a,cycle:f+1},t}function wt(e,t){const r=new F(""),s=new F("");let o;if(e[t?"prepend":"append"](r),t){let{lastElementChild:n}=e;for(;n;){const{previousElementSibling:c}=n;if(w(n,!0)&&!w(c,!0)){o=n;break}n=c}}return o?o.before(s):e.append(s),{markStart:r,markEnd:s}}function kt(e,t,r,s,o,n){e=e==null?null:ft(e)?e:[e];const c=t||wt(r,o),{markStart:h,markEnd:f,keyes:a}=c;let l;const u=a&&new Set;let i=h;if(e&&X(e,m=>{if(typeof m=="object"&&!m[A])return;const b=m[A]&&m.key,E=a&&b!=null&&a.get(b);i!=f&&i===E?u.delete(i):i=i==f?f:i.nextSibling;const d=a?E:i;let p=d;if(m[A])p=et(m,d,s,o,n);else{const L=m+"";!(p instanceof Text)||p instanceof F?p=new Text(L):p.data!=L&&(p.data=L)}p!=i&&(a&&u.delete(p),!d||a?(r.insertBefore(p,i),a&&i!=f&&u.add(i)):d==f?r.insertBefore(p,f):(r.replaceChild(p,d),i=p)),b!=null&&(l=l||new Map,l.set(b,p))}),i=i==f?f:i.nextSibling,t&&i!=f)for(;i!=f;){const m=i;i=i.nextSibling,m.remove()}return u&&u.forEach(m=>m.remove()),c.keyes=l,c}function Dt(e,t,r,s,o){for(const n in t)!(n in r)&&Y(e,n,t[n],null,o,s);for(const n in r)Y(e,n,t[n],r[n],o,s)}function Y(e,t,r,s,o,n){if(t=t=="class"&&!o?"className":t,r=r??null,s=s??null,t in e&&Ot[t]&&(r=e[t]),!(s===r||It[t]||t[0]=="_"))if(e.localName==="slot"&&t==="assignNode"&&"assign"in e)e.assign(s);else if(t[0]=="o"&&t[1]=="n"&&(g(s)||g(r)))Ft(e,t.slice(2),s,n);else if(t=="ref")s&&(g(s)?s(e):s.current=e);else if(t=="style"){const{style:c}=e;r=r||"",s=s||"";const h=P(r),f=P(s);if(h)for(const a in r)if(f)!(a in s)&&U(c,a,null);else break;if(f)for(const a in s){const l=s[a];h&&r[a]===l||U(c,a,l)}else c.cssText=s}else{const c=t[0]=="$"?t.slice(1):t;c===t&&(!o&&!Lt[t]&&t in e||g(s)||g(r))?e[t]=s??"":s==null?e.removeAttribute(c):e.setAttribute(c,P(s)?JSON.stringify(s):s)}}function Ft(e,t,r,s){if(s.handleEvent||(s.handleEvent=o=>s[o.type].call(e,o)),r){if(!s[t]){const o=r.capture||r.once||r.passive?Object.assign({},r):null;e.addEventListener(t,s,o)}s[t]=r}else s[t]&&(e.removeEventListener(t,s),delete s[t])}function U(e,t,r){let s="setProperty";r==null&&(s="removeProperty",r=null),~t.indexOf("-")?e[s](t,r):e[t]=r}const $t=tt("host",{style:"display: contents"}),Bt="value",Ht=(e,t)=>{const r=W(),s=ct();_t(()=>Z(r.current,"ConnectContext",o=>{o.composedPath().at(0)!==o.currentTarget&&e===o.detail.id&&(o.stopPropagation(),o.detail.connect(s))}),[e]),s.current=t},Yt=e=>{const t=Q(({value:r})=>(Ht(t,r),$t),{props:{value:{type:Object,value:()=>e}}});return t[Bt]=e,t};Yt({dispatch(e,t){}});const{addons:Ut,useEffect:zt}=__STORYBOOK_MODULE_PREVIEW_API__,z={tsx:"typescript",html:"html"},Jt={style:"display:contents"};function st({story:e,cid:t,args:r,code:s,source:o}){const n=W();Ct(()=>{requestAnimationFrame(()=>{Ut.getChannel().emit(rt,{id:t,args:r,source:o==="html"?n.current.innerHTML:s,...z[o]?{format:z[o]}:null})})});const c=e();return n.result=c,tt("host",Jt,c)}st.props={cid:String,story:Function,originalSource:String,code:String,source:String,args:null};const Kt=Q(st);customElements.get("atomico-decorator-wrapper")||customElements.define("atomico-decorator-wrapper",Kt);const Zt=({source:e,forceRemount:t}={source:"code"})=>(r,s)=>{const o=s.canvasElement;if(zt(()=>()=>n.remove(),[]),!o[s.id]){if(!t)try{Object.defineProperty(o,"innerHTML",{set(){return""},get(){return""}}),Object.defineProperty(o,"appendChild",{value:h=>{n.isConnected||o.append(h)}})}catch{}o[s.id]=document.createElement("atomico-decorator-wrapper"),o[s.id].setAttribute("cid",s.id)}const n=o[s.id];n.story=r,n.args=s.unmappedArgs,n.code=s.parameters.docs.source.originalSource,n.source=e;const c=s.parameters.fileName.match(/\.(\w+)$/);return c&&(s.parameters.docs.source.language=c.at(1)),t?n:(n.isConnected||o.append(n),"")};export{Mt as F,ut as P,Xt as a,$ as b,Q as c,Zt as d,W as e,bt as f,tt as h,g as i,x as o,ct as u};
